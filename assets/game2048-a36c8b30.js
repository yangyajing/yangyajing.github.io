import{_ as N,r as i,h as O,f as T,o as _,c as m,a as n,i as b,t as C,F as y,b as M,j as V,v as R,g as D,w as F,E as L,n as k,p as z,e as A}from"./index-f38f66f0.js";const I=h=>(z("data-v-5c49f198"),h=h(),A(),h),G={class:"container"},P={class:"game-wrap"},q={class:"wrap-top"},H=I(()=>n("div",{class:"game-title"},"2048",-1)),J={class:"score-wrap"},K={class:"score-item best-score"},Q={class:"score-item current-score"},U={class:"game-content"},W={class:"over-box"},X={class:"over-content"},Y=I(()=>n("div",{class:"over-text"},"GAME OVER",-1)),Z={class:"over-score"},$={class:"button-wrap"},j={__name:"game2048",setup(h){const d=i(0),f=i(0),v=i([]),c=i(4),u=i(4),S=i(0),w=i(!1);function x(){var s=[];f.value=0,d.value=localStorage.getItem("2048score")?localStorage.getItem("2048score"):0,S.value=0,w.value=!1;for(var r=0;r<c.value;r++){s[r]=[];for(var a=0;a<u.value;a++)s[r][a]=0}p(s)}function p(s){var r=Math.floor(Math.random()*c.value),a=Math.floor(Math.random()*u.value);s[r][a]==0?(S.value++,s[r][a]=Math.random()>.5?2:4,S.value<2?p(s):v.value=s):p(s)}function g(s){f.value+=s,f.value>d.value&&(d.value=f.value,localStorage.setItem("2048score",d.value))}function E(){for(var s=0;s<c.value;s++)for(var r=0;r<u.value;r++){if(v.value[s][r]==0)return!0;if(v.value[s-1]&&v.value[s-1][r]==v.value[s][r]||v.value[s+1]&&v.value[s+1][r]==v.value[s][r]||v.value[s][r-1]&&v.value[s][r-1]==v.value[s][r]||v.value[s][r+1]&&v.value[s][r+1]==v.value[s][r])return!0}return!1}function B(){L.confirm("确认重新开始？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{x()}).catch(()=>{})}return O(()=>{x(),document.onkeydown=s=>{var r=!1,a=[...v.value];if(s.keyCode==37)for(var e=0;e<c.value;e++)for(var t=0;t<u.value;t++){for(var l=null,o=t+1;o<u.value;o++)if(a[e][o]!=0){l=o;break}l&&(a[e][t]==0?(a[e][t]=a[e][o],a[e][o]=0,t--,r=!0):a[e][t]==a[e][o]&&(a[e][t]*=2,a[e][o]=0,r=!0,g(a[e][t])))}else if(s.keyCode==38)for(var e=0;e<u.value;e++)for(var t=0;t<c.value;t++){for(var l=null,o=t+1;o<c.value;o++)if(a[o][e]!=0){l=o;break}l&&(a[t][e]==0?(a[t][e]=a[o][e],a[o][e]=0,t--,r=!0):a[t][e]==a[o][e]&&(a[t][e]*=2,a[o][e]=0,r=!0,g(a[t][e])))}else if(s.keyCode==39)for(var e=0;e<c.value;e++)for(var t=u.value-1;t>=0;t--){for(var l=null,o=t-1;o>=0;o--)if(a[e][o]!=0){l=o;break}(l||l===0)&&(a[e][t]==0?(a[e][t]=a[e][o],a[e][o]=0,t++,r=!0):a[e][t]==a[e][o]&&(a[e][t]*=2,a[e][o]=0,r=!0,g(a[e][t])))}else if(s.keyCode==40)for(var e=0;e<u.value;e++)for(var t=c.value-1;t>=0;t--){for(var l=null,o=t-1;o>=0;o--)if(a[o][e]!=0){l=o;break}(l||l==0)&&(a[t][e]==0?(a[t][e]=a[o][e],a[o][e]=0,t++,r=!0):a[t][e]==a[o][e]&&(a[t][e]*=2,a[o][e]=0,r=!0,g(a[t][e])))}r&&(p(a),E()||(w.value=!0))}}),(s,r)=>{const a=T("router-link");return _(),m("div",G,[n("div",P,[n("div",{class:"config-bar"},[n("div",{class:"bar-item new-game",onClick:B},"重新开始")]),n("div",q,[H,n("div",J,[n("div",K,[b(" BEST: "),n("span",null,C(d.value),1)]),n("div",Q,[b(" SCORE: "),n("span",null,C(f.value),1)])])]),n("div",U,[(_(!0),m(y,null,M(v.value,(e,t)=>(_(),m("div",{class:"content-row",key:t},[(_(!0),m(y,null,M(e,(l,o)=>(_(),m("div",{class:k(["content-item","item_"+l]),key:o},C(l==0?"":l),3))),128))]))),128))])]),V(n("div",W,[n("div",X,[Y,n("div",Z,"SCORE: "+C(f.value),1),n("div",$,[n("div",{class:"restart",onClick:x},"重新开始"),D(a,{to:"/game"},{default:F(()=>[b("退出")]),_:1})])])],512),[[R,w.value]])])}}},ae=N(j,[["__scopeId","data-v-5c49f198"]]);export{ae as default};
