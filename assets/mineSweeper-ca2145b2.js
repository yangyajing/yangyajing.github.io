import{_ as K,r as v,h as Q,f as g,o as k,c as S,a as s,g as c,w as u,i as p,t as $,F as P,b as z,j as L,v as N,n as W,k as Y,p as Z,e as j,E as y}from"./index-f38f66f0.js";const w=I=>(Z("data-v-7923a0f7"),I=I(),j(),I),x={class:"container"},ee={class:"game-wrap"},te={class:"config-bar"},ne=w(()=>s("span",{class:"el-dropdown-link"},"选项",-1)),se={class:"wrap-top"},ae=w(()=>s("div",{class:"game-title"},"扫雷",-1)),oe={class:"score-wrap"},ie={class:"score-item"},le={class:"score-item"},ue={class:"game-content"},ve=["onClick","onContextmenu"],ce={class:"over-box"},re={class:"over-content"},de=w(()=>s("div",{class:"over-text"},"GAME OVER",-1)),_e={class:"button-wrap"},pe={class:"game-type-box"},fe={class:"type-content"},he=w(()=>s("p",null,"游戏难度",-1)),me={class:"type-list"},Me={class:"game-help-box"},ge={class:"help-content"},we=w(()=>s("p",null,"帮助",-1)),Ce=w(()=>s("div",{class:"help-info"},"如果您认为某个方块位置无雷，请使用鼠标左键点击它，将为您显示该方块周围雷数。如果您认为某个方块可能藏有地雷，请鼠标右键点击它，在该方块上做小旗标识（再次右键点击取消标识）。",-1)),be={class:"button-wrap"},ke={__name:"mineSweeper",setup(I){const C=v(9),b=v(9),V=v(10),h=v(0),o=v(null),r=v([]),E=v(!1),m=v("0"),T=v(!1),B=v(!1);function O(){E.value=!1,o.value&&(clearInterval(o.value),o.value=null,h.value=0);for(var e=[],t=0;t<C.value;t++){e[t]=[];for(var l=0;l<b.value;l++)e[t][l]={isOpen:!1,hasMineCount:0,isMine:!1,isSign:!1}}for(var d=0;d<V.value;d++)X(e);for(var n=0;n<C.value;n++)for(var a=0;a<b.value;a++)if(!e[n][a].isMine){var i=0;e[n-1]&&e[n-1][a-1]&&e[n-1][a-1].isMine&&i++,e[n-1]&&e[n-1][a]&&e[n-1][a].isMine&&i++,e[n-1]&&e[n-1][a+1]&&e[n-1][a+1].isMine&&i++,e[n][a-1]&&e[n][a-1].isMine&&i++,e[n][a+1]&&e[n][a+1].isMine&&i++,e[n+1]&&e[n+1][a-1]&&e[n+1][a-1].isMine&&i++,e[n+1]&&e[n+1][a]&&e[n+1][a].isMine&&i++,e[n+1]&&e[n+1][a+1]&&e[n+1][a+1].isMine&&i++,e[n][a].hasMineCount=i}r.value=e}function X(e){var t=Math.floor(Math.random()*C.value),l=Math.floor(Math.random()*b.value);e[t][l].isMine?X(e):e[t][l].isMine=!0}function A(e,t,l){if(o.value||(o.value=setInterval(()=>{h.value++},1e3)),!e.isSign)if(e.isOpen=!0,e.isMine){for(var d=0;d<C.value;d++)for(var n=0;n<b.value;n++)r.value[d][n].isMine&&(r.value[d][n].isOpen=!0);E.value=!0}else e.hasMineCount||D(t,l)}function D(e,t){f(e-1,t-1),f(e-1,t),f(e-1,t+1),f(e,t-1),f(e,t+1),f(e+1,t-1),f(e+1,t),f(e+1,t+1)}function f(e,t){r.value[e]&&r.value[e][t]&&!r.value[e][t].isOpen&&(r.value[e][t].isOpen=!0,r.value[e][t].hasMineCount||D(e,t))}function H(e){e.isSign=!0,o.value||(o.value=setInterval(()=>{h.value++},1e3))}function R(){C.value=m.value==0?9:16,b.value=m.value==0?9:m.value==1?16:30,V.value=m.value==0?10:m.value==1?40:99,O(),T.value=!1}function U(){y.confirm("确认重新开始？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value&&(clearInterval(o.value),o.value=null,h.value=0),O()}).catch(()=>{})}return Q(()=>{O(),document.addEventListener("visibilitychange",function(){this.visibilityState=="hidden"?o.value&&(clearInterval(o.value),o.value=null):!o.value&&h.value&&(o.value=setInterval(()=>{h.value++},1e3))})}),(e,t)=>{const l=g("el-dropdown-item"),d=g("el-dropdown-menu"),n=g("el-dropdown"),a=g("router-link"),i=g("el-radio"),q=g("el-radio-group");return k(),S("div",x,[s("div",ee,[s("div",te,[c(n,{trigger:"click"},{dropdown:u(()=>[c(d,null,{default:u(()=>[c(l,{onClick:t[0]||(t[0]=M=>{B.value=!0})},{default:u(()=>[p("帮助")]),_:1}),c(l,{onClick:t[1]||(t[1]=M=>{T.value=!0})},{default:u(()=>[p("游戏难度")]),_:1}),c(l,{onClick:U},{default:u(()=>[p("重新开始")]),_:1})]),_:1})]),default:u(()=>[ne]),_:1})]),s("div",se,[ae,s("div",oe,[s("div",ie,[p(" 剩余雷数: "),s("span",null,$(V.value),1)]),s("div",le,[p(" 用时: "),s("span",null,$(h.value)+"s",1)])])]),s("div",ue,[(k(!0),S(P,null,z(r.value,(M,F)=>(k(),S("div",{class:"content-row",key:F},[(k(!0),S(P,null,z(M,(_,G)=>(k(),S("div",{class:W(["content-item",[{"mine-item":_.isMine,"open-item":_.isOpen,"sign-item":_.isSign},"item"+_.hasMineCount]]),key:G,onClick:J=>A(_,F,G),onContextmenu:Y(J=>H(_),["right","stop","prevent"])},$(_.hasMineCount&&_.isOpen?_.hasMineCount:""),43,ve))),128))]))),128))])]),L(s("div",ce,[s("div",re,[de,s("div",_e,[s("div",{class:"restart",onClick:O},"重新开始"),c(a,{to:"/game"},{default:u(()=>[p("退出")]),_:1})])])],512),[[N,E.value]]),L(s("div",pe,[s("div",fe,[he,s("div",me,[c(q,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=M=>m.value=M)},{default:u(()=>[c(i,{label:"0"},{default:u(()=>[p("初级 10个雷 9X9网格")]),_:1}),c(i,{label:"1"},{default:u(()=>[p("中级 40个雷 16X16网格")]),_:1}),c(i,{label:"2"},{default:u(()=>[p("高级 99个雷 16X30网格")]),_:1})]),_:1},8,["modelValue"])]),s("div",{class:"button-wrap"},[s("div",{class:"button-item",onClick:R},"确定")])])],512),[[N,T.value]]),L(s("div",Me,[s("div",ge,[we,Ce,s("div",be,[s("div",{class:"button-item",onClick:t[3]||(t[3]=M=>B.value=!1)},"确定")])])],512),[[N,B.value]])])}}},Ie=K(ke,[["__scopeId","data-v-7923a0f7"]]);export{Ie as default};
